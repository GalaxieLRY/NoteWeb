---
title: 【栈】有效的括号
date: 2025-09-03
---

## 题目：

题目链接：[20. 有效的括号](https://leetcode.cn/problems/valid-parentheses/description/?envType=study-plan-v2&envId=top-100-liked)

题目描述：

> 给定一个只包括 `'('`，`')'`，`'{'`，`'}'`，`'['`，`']'` 的字符串 `s` ，判断字符串是否有效。
> 
> 有效字符串需满足：
> 1. 左括号必须用相同类型的右括号闭合。
> 2. 左括号必须以正确的顺序闭合。
> 3. 每个右括号都有一个对应的相同类型的左括号。

## 思路：

1. 如果字符串s长度为奇数，则左右括号肯定不匹配，即肯定不是有效字符串。否则，转2。
2. 定义unordered_map，右括号是键，左括号是值；
3. 遍历字符串s。如果unordered_map里有这个键，即为右括号，转4；否则，转5。
4. 如果此时栈为空，或者栈顶不是与该键匹配的左括号，即unodered_map里对应的的值，则不是有效字符串。否则，栈顶是与该键匹配的左括号，出栈。
5. 入栈。
6. 重复步骤3-5。
7. 最后判断栈是否为空。如果栈为空，则表明均匹配成功，是有效字符串，返回true。否则返回false。

## 代码：

```c++
class Solution {
public:
    bool isValid(string s) {
        int n=s.size();
        if(n % 2 == 1)return false;

        // 右括号是键，左括号是值
        unordered_map<char, char> unoderedMap={
            {'}', '{'}, // char用单引号，双引号是string
            {']', '['},
            {')', '('}
        };
        stack<char> stk;

        for(auto ch:s){
            if(unoderedMap.count(ch)){
                // unoderedMap里有ch这个键，即ch是右括号

                if(stk.empty() || stk.top() != unoderedMap[ch]){
                    // ch是右括号，但是栈为空或栈顶不是与右括号匹配的左括号
                    return false;
                }

                // stk栈顶是与ch匹配的左括号
                stk.pop();
            }else{
                // ch是左括号
                stk.push(ch);
            }
        }

        return stk.empty();
    }
};
```