---
title: 【矩阵】矩阵置零
date: 2025-08-27
---


## 题目：

题目链接：[73. 矩阵置零](https://leetcode.cn/problems/set-matrix-zeroes/description/?envType=study-plan-v2&envId=top-100-liked)

题目描述：

> 给定一个`m x n`的矩阵，如果一个元素为`0`，则将其所在行和列的所有元素都设为`0`。请使用**原地**算法。
> 原地算法：
> - 在计算机科学中，一个原地算法（in-place algorithm）基本上不需要额外辅助的数据结构,然而,允许少量额外的辅助变量来转换数据的算法。当算法运行时，输入的数据通常会被要输出的部分覆盖掉。不是原地算法有时候称为非原地（not-in-place）或不得其所（out-of-place）。–摘自维基百科。
> - 在计算复杂性理论中，原地算法包含使用O(1)空间复杂度的所有算法，DSPACE(1)类型。

## 思路：

方法一：暴力（这里没有使用原地算法）

- 这里不过多解释
- 只需注意一点：题目中矩阵可能是`m×n`的方阵，也可能是`m×n`的非方阵

方法二：原地算法

1. 标记首行和首列是否需要置零
2. 检查首行是否有零
3. 检查首列是否有零
4. 用首行和首列标记其他行和列是否需要置零
5. 根据标记置零（不包括首行首列）
6. 处理首行
7. 处理首列

## 代码：

```c++
class Solution {
public:
    // void setZeroes(vector<vector<int>>& matrix) {
    //     // 题目中矩阵可能是 m×n 的非方阵
    //     // 非原地算法
    //     // 暴力
    //     int m=matrix.size();
    //     int n=matrix[0].size();
    //     vector<vector<int>>loc;

    //     for(int i=0; i<m; ++i){
    //         for(int j=0; j<n; ++j){
    //             if(matrix[i][j] == 0){
    //                 loc.push_back({i,j});
    //             }
    //         }
    //     }

    //     for(int i=0; i<loc.size(); ++i){
    //         for(int j=0; j<n; ++j){
    //             matrix[loc[i][0]][j]=0;
    //         }
    //     }

    //     for(int i=0; i<loc.size(); ++i){
    //         for(int j=0; j<m; ++j){
    //             matrix[j][loc[i][1]]=0;
    //         }
    //     }
    // }


    void setZeroes(vector<vector<int>>& matrix) {
        // 原地算法
        int m = matrix.size();
        if (m == 0) return;
        int n = matrix[0].size();
        
        // 标记首行和首列是否需要置零
        bool firstRowZero = false, firstColZero = false;
        
        // 检查首行是否有零
        for (int j = 0; j < n; ++j) {
            if (matrix[0][j] == 0) {
                firstRowZero = true;
                break;
            }
        }
        
        // 检查首列是否有零
        for (int i = 0; i < m; ++i) {
            if (matrix[i][0] == 0) {
                firstColZero = true;
                break;
            }
        }
        
        // 用首行和首列标记其他行和列是否需要置零
        for (int i = 1; i < m; ++i) {
            for (int j = 1; j < n; ++j) {
                if (matrix[i][j] == 0) {
                    matrix[i][0] = 0;  // 标记当前行需要置零
                    matrix[0][j] = 0;  // 标记当前列需要置零
                }
            }
        }
        
        // 根据标记置零（不包括首行首列）
        for (int i = 1; i < m; ++i) {
            for (int j = 1; j < n; ++j) {
                if (matrix[i][0] == 0 || matrix[0][j] == 0) {
                    matrix[i][j] = 0;
                }
            }
        }
        
        // 处理首行
        if (firstRowZero) {
            for (int j = 0; j < n; ++j) {
                matrix[0][j] = 0;
            }
        }
        
        // 处理首列
        if (firstColZero) {
            for (int i = 0; i < m; ++i) {
                matrix[i][0] = 0;
            }
        }
    }

};
```